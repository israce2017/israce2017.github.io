<!DOCTYPE html>
  <html>
    <head>
      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Bree+Serif" rel="stylesheet">
      <!-- Compiled and minified CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/css/materialize.min.css">

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <style>
      header, main, footer {
        padding-left: 220px;
      }

      @media only screen and (max-width : 992px) {
        header, main, footer {
          padding-left: 0;
        }
      }
      .side-nav .userView {
        color: #000000;
        padding: 0px;
      }
      .carousel .carousel-item {
        width:550px !important;
      }

      </style>

    </head>

    <body>
      <header>
        <nav>
          <div class="nav-wrapper blue darken-3">
            <div class="container">
              <a href="#!" class="brand-logo center">ISRACE 2017</a>
              <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
              <ul class="side-nav fixed" id="mobile-demo">
                <li>
                  <div class="userView">
                    <!-- h5 class="center-align"><b>RACE 2017</b></h5 -->
                    <br>
                    <br>
                  </div>
                </li>
                <li><a href="index.html">Home</a></li>
                <li><a href="themes.html">Themes</a></li>
                <li><a href="venue.html">Venue</a></li>
                <li><a href="organizers.html">Organizers</a></li>
                <li><a href="registration.html">Registration</a></li>
                <li><a href="accomodation.html">Accomodation</a></li>
                <li><a href="abstract.html">Abstract Submission</a></li>
                <li><a href="satellite.html">Satellite Events</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li>
                  <br><br>
                  <div class="card">

                    <div id="takelow" class="card-image waves-effect waves-block waves-light">
                      <img src="chennai.jpg">
                      <span style="padding-bottom:0px" class="card-title yellow-text">Explore Chennai</span>
                    </div>

                  </div>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </header>
      <main>
        <div class="container">
          <center>
            <h4 class="thin blue-text text-darken-3" style="font-family:'Bree Serif', serif;">International Symposium on</h4><h3 style="font-family:'Bree Serif', serif;" class="blue-text text-darken-3">Recent Advances in Comparative Endocrinology</h3><br>
            <h5>November 29 to December 1, 2017<br>Madras Christian College, Chennai, India</h5>
          </center>
          <br>
          <div class="divider"></div>
            <h3 class="thin blue-text text-darken-3 center-align">Abstact Submission</h3>
<br>
<div class="row">
<p>1. Download the abstract submission form.<br>2. Fill the details.<br>3. Rename the document as "<i>name</i>_<i>registration number</i>.docx" example: mosesinbaraj_1234.docx<br>4. Upload the document</p>
</div>
<div class="row">
<p>Abstract Submission Form: <a class="waves-effect waves-light btn-flat" href="/abstract_submission_form.docx">Download</a>
</p>
</div>
<div class="row">
<p>Sample Abstract: <a class="waves-effect waves-light btn-flat" href="/sample_abstract.pdf">Download</a></p>
</div>
<div id="uploaddiv">
<h4 class="thin blue-text text-darken-3 center-align">Upload Abstract</h4>
<div class="row">
  <form name="uploadabstract" id="uploadabstract" class="col s12">
    <div class="row">
      <div class="input-field col s3">
        <input id="reg_no" type="number" class="validate" required>
        <label for="reg_no">Registraion Number</label>
      </div>
      <div class="file-field input-field col s9">
        <div class="btn">
          <span>Choose file</span>
          <input id="your_abstract" type="file" required>
        </div>
        <div class="file-path-wrapper">
          <input id="filenameda" class="file-path validate" type="text">
        </div>
      </div>
    </div>
    <div class="row">
      <center>
        <button class="btn-large waves-effect waves-light" type="submit" name="action">Submit
          <i class="material-icons right">send</i>
        </button>
      </center>
    </div>
  </form>
</div>
</div>


        </div>
      </main>
      <!--Import jQuery before materialize.js-->
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
      <!-- Compiled and minified JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js"></script>
      <script type="text/javascript" src="https://npmcdn.com/parse@1.9.2/dist/parse.js"></script>
      <script type="text/javascript">
      $( document ).ready(function(){
        $("#takelow").click(function () {
          window.location="http://www.indtravel.com/chennai/chennai.html";
        });


        $('select').material_select();
        $("#parseloader").hide();
        //var Parse = require('parse');
        Parse.initialize("Fdo6szLdxY1gndKElzfBljZoXvq1DRM84w8dwlvo", "JFvjUGB0TlqcH5moZf6TPWh8Z5l3SDpxT3i1mpk2");
        Parse.serverURL = 'https://parseapi.back4app.com';
        $('.carousel.carousel-slider').carousel({fullWidth: true});
        $('.carousel').height(307);
        $(".button-collapse").sideNav({
          menuWidth: 220
        });
        autoplay()
        function autoplay() {
            $('.carousel').carousel('next');
            $('.carousel').height(307);
            setTimeout(autoplay, 4000);
        }
        $('#newuser').submit(function(event){
          event.preventDefault();
          // var abfile = $("#your_abstract")[0];
          var yname = $("#title").val()+". "+$("#sur_name").val()+" "+$("#your_name").val()+" "+$("#last_name").val();
          var yemail = $("#your_email").val();
          var altemail = $("#alt_email").val();
          var affinstitution = $("#aff_institution").val();
          var address = $("#address").val();
          var country = $("#autocomplete-input").val();
          var phone = $("#phone").val();
          var passport = $("#passport_number").val();
          var scientific = $("#scientific").val();
          var presentation = $("#presentation").val();
          // var name = $("#filenameda").val();
          $("#newuserdiv").html('<p class="center-align">We are uploading your details, please wait.</p><div class="progress"><div class="indeterminate"></div></div>');

          var israceabstracts = Parse.Object.extend("realrace");
          var emailquery = new Parse.Query(israceabstracts);
          emailquery.equalTo("email", String(yemail));
          emailquery.find({
            success: function(results) {
              if(results.length>0)
              {
                //existing email id has been given.
                alert('Email ID already exists.');
                window.location='/newuser.html';
              }
              else
              {
                console.log("I have passed the email check");
                function recaller()
                {
                  //generate a 4 digit number and check whether it is already ther or not.
                  //console.log('inside while loop');
                  var regno = Math.floor(1000 + Math.random() * 9000);
                  var regnoquery = new Parse.Query(israceabstracts);
                  regnoquery.equalTo("regno", regno);
                  regnoquery.find({
                    success: function(regresults) {
                      //console.log('inside success block of regno query');
                      if(regresults.length>0)
                      {
                        //call the recaller now
                        console.log('already there da');
                        recaller();
                      }
                      else
                      {
                        console.log('in the else block of regno query');
                        //its a unique number
                        var entry = new israceabstracts();
                        entry.set("name",yname);
                        entry.set("email",yemail);
                        if(altemail)
                        {
                          entry.set("altemail",altemail);
                        }
                        entry.set("institution",affinstitution);
                        entry.set("address",address);
                        entry.set("country",country);
                        if(phone)
                        {
                          entry.set("phone",phone);
                        }
                        if(passport)
                        {
                          entry.set("passport",passport);
                        }
                        entry.set("scientificsession",scientific);
                        entry.set("presentationtype",presentation);
                        entry.set("regno",regno);
                        entry.save(null, {
                          success: function(entry) {
                            console.log('now going to email mandril');
                            $.ajax({
                                url: "https://mandrillapp.com/api/1.0/messages/send.json",

                                // The name of the callback parameter, as specified by the YQL service
                                jsonp: "c",

                                // Tell jQuery we're expecting JSONP
                                dataType: "jsonp",

                                // Tell YQL what we want and that we want JSON
                                data: {
                                    "key": "xSOd2emthJ0aDh7eRdDm4g",
                                    "message": {
                                      "html": "<p>Hi Moses,<br><br>New registration was made<br><br>Registration Details:<br>Unique Registration Number: "+String(regno)+"<br>Name: "+String(yname)+"<br>Email: "+String(yemail)+"<br>Alternate Email: "+String(altemail)+"<br>Affiliated Institution: "+String(affinstitution)+"<br>Address: "+String(address)+"<br>Country: "+String(country)+"<br>Phone: "+String(phone)+"<br>Passport Number: "+String(passport)+"<br>Scientific Session: "+String(scientific)+"<br>Presentation Type: "+String(presentation)+"</p>",
                                      "subject": "New registration submitted ISRACE 2017",
                                      "from_email": "admin@israce2017.org",
                                      "from_name": "Super man",
                                      "to": [
                                          {
                                              "email": "israce2017@gmail.com",
                                              "name": "Moses Inbaraj",
                                              "type": "to"
                                          }
                                      ]
                                    }
                                },

                                // Work with the response
                                success: function( response ) {
                                    console.log( response ); // server response
                                },
                                error: function(data) {
                                  if(data.status==200)
                                  {
                                    //send to the new user too.
                                    $.ajax({
                                        url: "https://mandrillapp.com/api/1.0/messages/send.json",

                                        // The name of the callback parameter, as specified by the YQL service
                                        jsonp: "c",

                                        // Tell jQuery we're expecting JSONP
                                        dataType: "jsonp",

                                        // Tell YQL what we want and that we want JSON
                                        data: {
                                            "key": "xSOd2emthJ0aDh7eRdDm4g",
                                            "message": {
                                              "html": "<p>Hi "+String(yname)+",<br><br>Thankyou for registering your participation in ISRACE2017.<br>We have received your registration details for ISRACE2017. Kindly note down the registration number for uploading the abstract.<br>Abstract submission link: <a href='http://israce2017.org/abstract.html'>israce2017.org/abstract.html</a><br><br>Registration Details:<br>Unique Registration Number: "+String(regno)+"<br>Name: "+String(yname)+"<br>Email: "+String(yemail)+"<br>Alternate Email: "+String(altemail)+"<br>Affiliated Institution: "+String(affinstitution)+"<br>Address: "+String(address)+"<br>Country: "+String(country)+"<br>Phone: "+String(phone)+"<br>Passport Number: "+String(passport)+"<br>Scientific Session: "+String(scientific)+"<br>Presentation Type: "+String(presentation)+"<br><br>We welcome you to the International Symposium<br><br>Organizing Secretary - ISRACE2017</p>",
                                              "subject": "Registration details for ISRACE 2017",
                                              "from_email": "admin@israce2017.org",
                                              "from_name": "Admin israce2017",
                                              "to": [
                                                  {
                                                      "email": String(yemail),
                                                      "name": String(yname),
                                                      "type": "to"
                                                  }
                                              ]
                                            }
                                        },

                                        // Work with the response
                                        success: function( response ) {
                                            console.log( response ); // server response
                                        },
                                        error: function(data) {
                                          if(data.status==200)
                                          {
                                            $("#newuserdiv").html('<br><br><h4 class="center-align"><b>Your details have been saved successfully towards ISRACE2017 registration. Further communications will reach you from the organizers.</b></h4>');
                                          }
                                        }
                                    });
                                  }
                                }
                            });

                          },
                          error: function(error) {
                            console.log("Error: " + error.code + " " + error.message);
                          }
                        });

                      }
                    },
                    error: function(error) {
                      console.log("Error: " + error.code + " " + error.message);
                    }
                  });
                }
                recaller();
              }
            },
            error: function(error) {
              console.log("Error: " + error.code + " " + error.message);
            }
          });


          //
          // var fileUploadControl = abfile;
          // if (fileUploadControl.files.length > 0) {
          //   var file = fileUploadControl.files[0];
          //   if(file.size/1024/1024 > 10)
          //   {
          //     alert('Abstract file size cannot be more than 10 MB');
          //   }
          //   else
          //   {
          //     //check mail id and then proceed for saving
          //     var israceabstracts = Parse.Object.extend("israceabstracts");
          //     var emailquery = new Parse.Query(israceabstracts);
          //     emailquery.equalTo("email", String(yemail));
          //     emailquery.find({
          //       success: function(results) {
          //         if(results.length>0)
          //         {
          //           //existing email id has been given.
          //           alert('Email ID already exists.');
          //           window.location='/newuser.html';
          //         }
          //         else
          //         {
          //           function recaller()
          //           {
          //             //generate a 4 digit number and check whether it is already ther or not.
          //             //console.log('inside while loop');
          //             var regno = Math.floor(1000 + Math.random() * 9000);
          //             var regnoquery = new Parse.Query(israceabstracts);
          //             regnoquery.equalTo("regno", regno);
          //             regnoquery.find({
          //               success: function(regresults) {
          //                 //console.log('inside success block of regno query');
          //                 if(regresults.length>0)
          //                 {
          //                   //call the recaller now
          //                   //console.log('already there da');
          //                   recaller();
          //                 }
          //                 else
          //                 {
          //                   //console.log('in the else block of regno query');
          //                   //its a unique number
          //                   var parseFile = new Parse.File(name, file);
          //                   var reader = new FileReader();
          //                   reader.readAsDataURL(file);
          //                   reader.onload = function () {
          //                     var filestring= reader.result;
          //                     var filery = filestring.split(",");
          //                     var wantedstring = filery[1];
          //                     var filetype = filery[0].split(":");
          //                     var onlytype = filetype[1].split(";");
          //                     var wantedmime = onlytype[0];
          //                     parseFile.save().then(function() {
          //                       // The file has been saved to Parse.
          //                       //console.log('success file uploaded');
          //                       var entry = new israceabstracts();
          //                       entry.set("name",yname);
          //                       entry.set("email",yemail);
          //                       entry.set("abstract",parseFile);
          //                       entry.set("regno",regno);
          //                       entry.save(null, {
          //                         success: function(entry) {
          //                           // Execute any logic that should take place after the object is saved.
          //                           //console.log('New object created with objectId: ' + entry.id);
          //                           //now send mail using mandrill
          //                           //fetch the uploaded file's url
          //                           var GameScore = Parse.Object.extend("israceabstracts");
          //                           var query = new Parse.Query(GameScore);
          //                           query.equalTo("email", String(yemail));
          //                           query.find({
          //                             success: function(results) {
          //                               // Do something with the returned Parse.Object values
          //                               var abstracturl = results[0].get('abstract');
          //                               var regnoloaded = results[0].get('regno');
          //                               //console.log(regnoloaded);
          //                               // $.ajax({
          //                               //     url: "https://mandrillapp.com/api/1.0/messages/send.json",
          //                               //
          //                               //     // The name of the callback parameter, as specified by the YQL service
          //                               //     jsonp: "c",
          //                               //
          //                               //     // Tell jQuery we're expecting JSONP
          //                               //     dataType: "jsonp",
          //                               //
          //                               //     // Tell YQL what we want and that we want JSON
          //                               //     data: {
          //                               //         "key": "xSOd2emthJ0aDh7eRdDm4g",
          //                               //         "message": {
          //                               //           "html": "<p>Hi Moses,<br><br>New Abstract was submitted by <b>"+String(yname)+" ("+String(yemail)+")</b><br>Unique Registration Number: "+String(regnoloaded)+"<br>Abstract link: <a href='"+String(abstracturl.url())+"'>Click here</a></p>",
          //                               //           "subject": "New Abstract submitted ISRACE 2017",
          //                               //           "from_email": "admin@israce2017.org",
          //                               //           "from_name": "Super man",
          //                               //           "to": [
          //                               //               {
          //                               //                   "email": "inbarajmoses2004@yahoo.com",
          //                               //                   "name": "Moses Inbaraj",
          //                               //                   "type": "to"
          //                               //               }
          //                               //           ]
          //                               //         }
          //                               //     },
          //                               //
          //                               //     // Work with the response
          //                               //     success: function( response ) {
          //                               //         console.log( response ); // server response
          //                               //     },
          //                               //     error: function(data) {
          //                               //       if(data.status==200)
          //                               //       {
          //                               //         //send to the new user too.
          //                               //         $.ajax({
          //                               //             url: "https://mandrillapp.com/api/1.0/messages/send.json",
          //                               //
          //                               //             // The name of the callback parameter, as specified by the YQL service
          //                               //             jsonp: "c",
          //                               //
          //                               //             // Tell jQuery we're expecting JSONP
          //                               //             dataType: "jsonp",
          //                               //
          //                               //             // Tell YQL what we want and that we want JSON
          //                               //             data: {
          //                               //                 "key": "xSOd2emthJ0aDh7eRdDm4g",
          //                               //                 "message": {
          //                               //                   "html": "<p>Hi "+String(yname)+",<br>We have received your  registration details for ISRACE2017. Kindly note down the registration number for uploading the abstract.<br>Abstract submission link: <a href=''>www.israce2017.org/abstract.html</a><br><br>Registration details:<br><br>Name: <b>"+String(yname)+"</b><br>Email: <b> "+String(yemail)+"</b><br>Unique Registration Number: <b> "+String(regnoloaded)+"</b><br>Abstract link: <b><a href='"+String(abstracturl.url())+"'>Click here</a></b></p>",
          //                               //                   "subject": "Registration details for ISRACE 2017",
          //                               //                   "from_email": "admin@israce2017.org",
          //                               //                   "from_name": "Admin israce2017",
          //                               //                   "to": [
          //                               //                       {
          //                               //                           "email": String(yemail),
          //                               //                           "name": String(yname),
          //                               //                           "type": "to"
          //                               //                       }
          //                               //                   ]
          //                               //                 }
          //                               //             },
          //                               //
          //                               //             // Work with the response
          //                               //             success: function( response ) {
          //                               //                 console.log( response ); // server response
          //                               //             },
          //                               //             error: function(data) {
          //                               //               if(data.status==200)
          //                               //               {
          //                               //                 $("#newuserdiv").html('<br><br><h4 class="center-align"><b>Your details have been saved successfully towards ISRACE2017 registration. Further communications will reach you from the organizers.</b></h4>');
          //                               //               }
          //                               //             }
          //                               //         });
          //                               //       }
          //                               //     }
          //                               // });
          //                             },
          //                             error: function(entry, error) {
          //                               // Execute any logic that should take place if the save fails.
          //                               // error is a Parse.Error with an error code and message.
          //                               console.log('Failed to create new object, with error code: ' + error.message);
          //                             }
          //                           });
          //                         },
          //                         error: function(error) {
          //                           console.log("Error: " + error.code + " " + error.message);
          //                         }
          //                       });
          //                     }, function(error) {
          //                       // The file either could not be read, or could not be saved to Parse.
          //                       console.log(error);
          //                     });
          //                   };
          //                   reader.onerror = function (error) {
          //                     console.log('Error: ', error);
          //                   };
          //                 }
          //               },
          //               error: function(error) {
          //                 console.log("Error: " + error.code + " " + error.message);
          //               }
          //             });
          //           }
          //           recaller();
          //         }
          //       },
          //       error: function(error) {
          //         console.log("Error: " + error.code + " " + error.message);
          //       }
          //     });
          //
          //   }
          // }
          //

        });
        $('input.autocomplete').autocomplete({
          data: {
            "Afghanistan" : null,
            "Albania" : null,
            "Algeria" : null,
            "American Samoa" : null,
            "Andorra" : null,
            "Angola" : null,
            "Anguilla" : null,
            "Antarctica" : null,
            "Antigua and Barbuda" : null,
            "Argentina" : null,
            "Armenia" : null,
            "Aruba" : null,
            "Australia" : null,
            "Austria" : null,
            "Azerbaijan" : null,
            "Bahamas" : null,
            "Bahrain" : null,
            "Bangladesh" : null,
            "Barbados" : null,
            "Belarus" : null,
            "Belgium" : null,
            "Belize" : null,
            "Benin" : null,
            "Bermuda" : null,
            "Bhutan" : null,
            "Bolivia" : null,
            "Bosnia and Herzegovina" : null,
            "Botswana" : null,
            "Bouvet Island" : null,
            "Brazil" : null,
            "British Antarctic Territory" : null,
            "British Indian Ocean Territory" : null,
            "British Virgin Islands" : null,
            "Brunei" : null,
            "Bulgaria" : null,
            "Burkina Faso" : null,
            "Burundi" : null,
            "Cambodia" : null,
            "Cameroon" : null,
            "Canada" : null,
            "Canton and Enderbury Islands" : null,
            "Cape Verde" : null,
            "Cayman Islands" : null,
            "Central African Republic" : null,
            "Chad" : null,
            "Chile" : null,
            "China" : null,
            "Christmas Island" : null,
            "Cocos [Keeling] Islands" : null,
            "Colombia" : null,
            "Comoros" : null,
            "Congo - Brazzaville" : null,
            "Congo - Kinshasa" : null,
            "Cook Islands" : null,
            "Costa Rica" : null,
            "Croatia" : null,
            "Cuba" : null,
            "Cyprus" : null,
            "Czech Republic" : null,
            "Côte d’Ivoire" : null,
            "Denmark" : null,
            "Djibouti" : null,
            "Dominica" : null,
            "Dominican Republic" : null,
            "Dronning Maud Land" : null,
            "East Germany" : null,
            "Ecuador" : null,
            "Egypt" : null,
            "El Salvador" : null,
            "Equatorial Guinea" : null,
            "Eritrea" : null,
            "Estonia" : null,
            "Ethiopia" : null,
            "Falkland Islands" : null,
            "Faroe Islands" : null,
            "Fiji" : null,
            "Finland" : null,
            "France" : null,
            "French Guiana" : null,
            "French Polynesia" : null,
            "French Southern Territories" : null,
            "French Southern and Antarctic Territories" : null,
            "Gabon" : null,
            "Gambia" : null,
            "Georgia" : null,
            "Germany" : null,
            "Ghana" : null,
            "Gibraltar" : null,
            "Greece" : null,
            "Greenland" : null,
            "Grenada" : null,
            "Guadeloupe" : null,
            "Guam" : null,
            "Guatemala" : null,
            "Guernsey" : null,
            "Guinea" : null,
            "Guinea-Bissau" : null,
            "Guyana" : null,
            "Haiti" : null,
            "Heard Island and McDonald Islands" : null,
            "Honduras" : null,
            "Hong Kong SAR China" : null,
            "Hungary" : null,
            "Iceland" : null,
            "India" : null,
            "Indonesia" : null,
            "Iran" : null,
            "Iraq" : null,
            "Ireland" : null,
            "Isle of Man" : null,
            "Israel" : null,
            "Italy" : null,
            "Jamaica" : null,
            "Japan" : null,
            "Jersey" : null,
            "Johnston Island" : null,
            "Jordan" : null,
            "Kazakhstan" : null,
            "Kenya" : null,
            "Kiribati" : null,
            "Kuwait" : null,
            "Kyrgyzstan" : null,
            "Laos" : null,
            "Latvia" : null,
            "Lebanon" : null,
            "Lesotho" : null,
            "Liberia" : null,
            "Libya" : null,
            "Liechtenstein" : null,
            "Lithuania" : null,
            "Luxembourg" : null,
            "Macau SAR China" : null,
            "Macedonia" : null,
            "Madagascar" : null,
            "Malawi" : null,
            "Malaysia" : null,
            "Maldives" : null,
            "Mali" : null,
            "Malta" : null,
            "Marshall Islands" : null,
            "Martinique" : null,
            "Mauritania" : null,
            "Mauritius" : null,
            "Mayotte" : null,
            "Metropolitan France" : null,
            "Mexico" : null,
            "Micronesia" : null,
            "Midway Islands" : null,
            "Moldova" : null,
            "Monaco" : null,
            "Mongolia" : null,
            "Montenegro" : null,
            "Montserrat" : null,
            "Morocco" : null,
            "Mozambique" : null,
            "Myanmar [Burma]" : null,
            "Namibia" : null,
            "Nauru" : null,
            "Nepal" : null,
            "Netherlands" : null,
            "Netherlands Antilles" : null,
            "Neutral Zone" : null,
            "New Caledonia" : null,
            "New Zealand" : null,
            "Nicaragua" : null,
            "Niger" : null,
            "Nigeria" : null,
            "Niue" : null,
            "Norfolk Island" : null,
            "North Korea" : null,
            "North Vietnam" : null,
            "Northern Mariana Islands" : null,
            "Norway" : null,
            "Oman" : null,
            "Pacific Islands Trust Territory" : null,
            "Pakistan" : null,
            "Palau" : null,
            "Palestinian Territories" : null,
            "Panama" : null,
            "Panama Canal Zone" : null,
            "Papua New Guinea" : null,
            "Paraguay" : null,
            "People's Democratic Republic of Yemen" : null,
            "Peru" : null,
            "Philippines" : null,
            "Pitcairn Islands" : null,
            "Poland" : null,
            "Portugal" : null,
            "Puerto Rico" : null,
            "Qatar" : null,
            "Romania" : null,
            "Russia" : null,
            "Rwanda" : null,
            "Réunion" : null,
            "Saint Barthélemy" : null,
            "Saint Helena" : null,
            "Saint Kitts and Nevis" : null,
            "Saint Lucia" : null,
            "Saint Martin" : null,
            "Saint Pierre and Miquelon" : null,
            "Saint Vincent and the Grenadines" : null,
            "Samoa" : null,
            "San Marino" : null,
            "Saudi Arabia" : null,
            "Senegal" : null,
            "Serbia" : null,
            "Serbia and Montenegro" : null,
            "Seychelles" : null,
            "Sierra Leone" : null,
            "Singapore" : null,
            "Slovakia" : null,
            "Slovenia" : null,
            "Solomon Islands" : null,
            "Somalia" : null,
            "South Africa" : null,
            "South Georgia and the South Sandwich Islands" : null,
            "South Korea" : null,
            "Spain" : null,
            "Sri Lanka" : null,
            "Sudan" : null,
            "Suriname" : null,
            "Svalbard and Jan Mayen" : null,
            "Swaziland" : null,
            "Sweden" : null,
            "Switzerland" : null,
            "Syria" : null,
            "São Tomé and Príncipe" : null,
            "Taiwan" : null,
            "Tajikistan" : null,
            "Tanzania" : null,
            "Thailand" : null,
            "Timor-Leste" : null,
            "Togo" : null,
            "Tokelau" : null,
            "Tonga" : null,
            "Trinidad and Tobago" : null,
            "Tunisia" : null,
            "Turkey" : null,
            "Turkmenistan" : null,
            "Turks and Caicos Islands" : null,
            "Tuvalu" : null,
            "U.S. Minor Outlying Islands" : null,
            "U.S. Miscellaneous Pacific Islands" : null,
            "U.S. Virgin Islands" : null,
            "Uganda" : null,
            "Ukraine" : null,
            "Union of Soviet Socialist Republics" : null,
            "United Arab Emirates" : null,
            "United Kingdom" : null,
            "United States" : null,
            "Unknown or Invalid Region" : null,
            "Uruguay" : null,
            "Uzbekistan" : null,
            "Vanuatu" : null,
            "Vatican City" : null,
            "Venezuela" : null,
            "Vietnam" : null,
            "Wake Island" : null,
            "Wallis and Futuna" : null,
            "Western Sahara" : null,
            "Yemen" : null,
            "Zambia" : null,
            "Zimbabwe" : null,
            "Åland Islands" : null
          },
          limit: 5,
          minLength: 1, // The minimum length of the input for the autocomplete to start. Default: 1.
        });

        //for the abstract upload form
        $('#uploadabstract').submit(function(event) {
          event.preventDefault();
          var abfile = $("#your_abstract")[0];
          var registno = $("#reg_no").val();
          var name = $("#filenameda").val();
          $("#uploaddiv").html('<p class="center-align">We are uploading your details, please wait.</p><div class="progress"><div class="indeterminate"></div></div>');
          //check if registration number is valid
          var israceabstracts = Parse.Object.extend("realrace");
          var regquery = new Parse.Query(israceabstracts);
          regquery.equalTo("regno", parseInt(registno));
          regquery.find({
            success: function(results) {
              if(results.length>0)
              {
                //valid registration number
                var fileUploadControl = abfile;
                if (fileUploadControl.files.length > 0) {
                  var file = fileUploadControl.files[0];
                  if(file.size/1024/1024 > 10)
                  {
                    alert('Abstract file size cannot be more than 10 MB');
                  }
                  else
                  {
                    var parseFile = new Parse.File(name, file);
                    parseFile.save().then(function(){
                      // console.log('file uploaded, now linking it with regno');
                      var abob = new Parse.Query(israceabstracts);
                      abob.equalTo("regno",parseInt(registno));
                      abob.first({
                        success: function(object) {
                          object.set("abstract",parseFile);
                          object.save();
                          $("#uploaddiv").html('<h4 class="center-align">Successfully uploaded the abstract</h4>')
                        },
                        error: function(data) {
                          console.log('error in updating file');
                          console.log(data);
                        }
                      });
                    }, function(error){
                      console.log('file upload error');
                      console.log(error);
                    });
                  }
                }

              }
              else
              {
                //invalid registration number
                alert('Invalid Registration Number');
                window.location='/abstract.html';
              }
            },
            error: function(error) {
              alert("Error: " + error.code + " " + error.message);
            }
          })
        });


      });
      </script>
    </body>
  </html>
